{"ast":null,"code":"import { CART_ADD_ITEM // CART_ADD_ITEM_FAIL,\n, CART_EMPTY, CART_REMOVE_ITEM, CART_SAVE_PAYMENT_METHOD, CART_SAVE_SHIPPING_ADDRESS } from '../constants/cartConstants';\nexport const cartReducer = (state = {\n  cartItems: []\n}, action) => {\n  switch (action.type) {\n    case CART_ADD_ITEM:\n      const item = action.payload; // Look if we already have the item in the cart (product = product.id)\n\n      const existItem = state.cartItems.find(x => x.product === item.product);\n\n      if (existItem) {\n        // if the item exist, we compare the id, if it's the same id, we replace by the newer item (item) else we don't change anything in the array, we put the x\n        return { ...state,\n          error: '',\n          cartItems: state.cartItems.map(x => x.product === existItem.product ? item : x)\n        };\n      } else {\n        // if item doesn't exist => we concatenate the last version of cart item with the new item\n        return { ...state,\n          error: '',\n          cartItems: [...state.cartItems, item]\n        };\n      }\n\n    case CART_REMOVE_ITEM:\n      return { ...state,\n        error: '',\n        cartItems: state.cartItems.filter(x => x.product !== action.payload)\n      };\n\n    case CART_SAVE_SHIPPING_ADDRESS:\n      return { ...state,\n        shippingAddress: action.payload\n      };\n\n    case CART_SAVE_PAYMENT_METHOD:\n      return { ...state,\n        paymentMethod: action.payload\n      };\n    // case CART_ADD_ITEM_FAIL:\n    //   return { ...state, error: action.payload };\n\n    case CART_EMPTY:\n      return { ...state,\n        error: '',\n        cartItems: []\n      };\n\n    default:\n      return state;\n  }\n};","map":{"version":3,"sources":["/Users/raphaellepaquet/lighthouse/shop-petitsfruits/frontend/src/reducers/cartReducers.js"],"names":["CART_ADD_ITEM","CART_EMPTY","CART_REMOVE_ITEM","CART_SAVE_PAYMENT_METHOD","CART_SAVE_SHIPPING_ADDRESS","cartReducer","state","cartItems","action","type","item","payload","existItem","find","x","product","error","map","filter","shippingAddress","paymentMethod"],"mappings":"AAAA,SACEA,aADF,CAEE;AAFF,EAGEC,UAHF,EAIEC,gBAJF,EAKEC,wBALF,EAMEC,0BANF,QAOO,4BAPP;AASA,OAAO,MAAMC,WAAW,GAAG,CAACC,KAAK,GAAG;AAAEC,EAAAA,SAAS,EAAE;AAAb,CAAT,EAA4BC,MAA5B,KAAuC;AAChE,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKT,aAAL;AACE,YAAMU,IAAI,GAAGF,MAAM,CAACG,OAApB,CADF,CAEE;;AACA,YAAMC,SAAS,GAAGN,KAAK,CAACC,SAAN,CAAgBM,IAAhB,CAAsBC,CAAD,IAAOA,CAAC,CAACC,OAAF,KAAcL,IAAI,CAACK,OAA/C,CAAlB;;AACA,UAAIH,SAAJ,EAAe;AACb;AACA,eAAO,EACL,GAAGN,KADE;AAELU,UAAAA,KAAK,EAAE,EAFF;AAGLT,UAAAA,SAAS,EAAED,KAAK,CAACC,SAAN,CAAgBU,GAAhB,CAAqBH,CAAD,IAC7BA,CAAC,CAACC,OAAF,KAAcH,SAAS,CAACG,OAAxB,GAAkCL,IAAlC,GAAyCI,CADhC;AAHN,SAAP;AAOD,OATD,MASO;AACJ;AACD,eAAO,EAAE,GAAGR,KAAL;AAAYU,UAAAA,KAAK,EAAE,EAAnB;AAAuBT,UAAAA,SAAS,EAAE,CAAC,GAAGD,KAAK,CAACC,SAAV,EAAqBG,IAArB;AAAlC,SAAP;AACD;;AACH,SAAKR,gBAAL;AACE,aAAO,EACL,GAAGI,KADE;AAELU,QAAAA,KAAK,EAAE,EAFF;AAGLT,QAAAA,SAAS,EAAED,KAAK,CAACC,SAAN,CAAgBW,MAAhB,CAAwBJ,CAAD,IAAOA,CAAC,CAACC,OAAF,KAAcP,MAAM,CAACG,OAAnD;AAHN,OAAP;;AAKF,SAAKP,0BAAL;AACE,aAAO,EAAE,GAAGE,KAAL;AAAYa,QAAAA,eAAe,EAAEX,MAAM,CAACG;AAApC,OAAP;;AACF,SAAKR,wBAAL;AACE,aAAO,EAAE,GAAGG,KAAL;AAAYc,QAAAA,aAAa,EAAEZ,MAAM,CAACG;AAAlC,OAAP;AACF;AACA;;AACA,SAAKV,UAAL;AACE,aAAO,EAAE,GAAGK,KAAL;AAAYU,QAAAA,KAAK,EAAE,EAAnB;AAAuBT,QAAAA,SAAS,EAAE;AAAlC,OAAP;;AACF;AACE,aAAOD,KAAP;AAjCJ;AAmCD,CApCM","sourcesContent":["import {\n  CART_ADD_ITEM,\n  // CART_ADD_ITEM_FAIL,\n  CART_EMPTY,\n  CART_REMOVE_ITEM,\n  CART_SAVE_PAYMENT_METHOD,\n  CART_SAVE_SHIPPING_ADDRESS,\n} from '../constants/cartConstants';\n\nexport const cartReducer = (state = { cartItems: [] }, action) => {\n  switch (action.type) {\n    case CART_ADD_ITEM:\n      const item = action.payload;\n      // Look if we already have the item in the cart (product = product.id)\n      const existItem = state.cartItems.find((x) => x.product === item.product);\n      if (existItem) {\n        // if the item exist, we compare the id, if it's the same id, we replace by the newer item (item) else we don't change anything in the array, we put the x\n        return {\n          ...state,\n          error: '',\n          cartItems: state.cartItems.map((x) =>\n            x.product === existItem.product ? item : x\n          ),\n        };\n      } else {\n         // if item doesn't exist => we concatenate the last version of cart item with the new item\n        return { ...state, error: '', cartItems: [...state.cartItems, item] };\n      }\n    case CART_REMOVE_ITEM:\n      return {\n        ...state,\n        error: '',\n        cartItems: state.cartItems.filter((x) => x.product !== action.payload),\n      };\n    case CART_SAVE_SHIPPING_ADDRESS:\n      return { ...state, shippingAddress: action.payload };\n    case CART_SAVE_PAYMENT_METHOD:\n      return { ...state, paymentMethod: action.payload };\n    // case CART_ADD_ITEM_FAIL:\n    //   return { ...state, error: action.payload };\n    case CART_EMPTY:\n      return { ...state, error: '', cartItems: [] };\n    default:\n      return state;\n  }\n};"]},"metadata":{},"sourceType":"module"}