{"ast":null,"code":"import _toConsumableArray from\"/Users/raphaellepaquet/lighthouse/shop-petitsfruits/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/raphaellepaquet/lighthouse/shop-petitsfruits/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import{detailsProduct}from\"../actions/productActions\";import LoadingBox from\"../components/LoadingBox\";import MessageBox from\"../components/MessageBox\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function ProductScreen(props){var dispatch=useDispatch();var productId=props.match.params.id;var _useState=useState(1),_useState2=_slicedToArray(_useState,2),qty=_useState2[0],setQty=_useState2[1];var productDetails=useSelector(function(state){return state.productDetails;});var loading=productDetails.loading,error=productDetails.error,product=productDetails.product;useEffect(function(){dispatch(detailsProduct(productId));},[dispatch,productId]);var addToCartHandler=function addToCartHandler(){props.history.push(\"/cart/\".concat(productId,\"?qty=\").concat(qty));};return/*#__PURE__*/_jsx(\"div\",{children:loading?/*#__PURE__*/_jsx(LoadingBox,{}):error?/*#__PURE__*/_jsx(MessageBox,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:/*#__PURE__*/_jsx(Link,{to:\"/shop\",children:\"Retour \\xE0 la Boutique\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"row top\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-2\",children:/*#__PURE__*/_jsx(\"img\",{className:\"large\",src:product.image,alt:product.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"h1\",{children:product.name})}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Price : $\",product.price]}),/*#__PURE__*/_jsxs(\"li\",{children:[\"Description:\",/*#__PURE__*/_jsx(\"p\",{children:product.description})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-1\",children:/*#__PURE__*/_jsx(\"div\",{className:\"card card-body\",children:/*#__PURE__*/_jsxs(\"ul\",{children:[/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Price\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"price\",children:[\"$\",product.price]})]})}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"div\",{children:product.countInStock>0?/*#__PURE__*/_jsx(\"span\",{className:\"success\",children:\"In Stock\"}):/*#__PURE__*/_jsx(\"span\",{className:\"danger\",children:\"Unavailable\"})})]})}),product.countInStock>0&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"li\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{children:\"Qt\\xE9 :\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"select\",{value:qty,onChange:function onChange(e){return setQty(e.target.value);},children:_toConsumableArray(Array(product.countInStock).keys()).map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x+1,children:x+1},x+1);})})})]}),/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(\"button\",{onClick:addToCartHandler,className:\"primary block\",children:\"Add to Cart\"})})]})]})})})]})]})});}","map":{"version":3,"sources":["/Users/raphaellepaquet/lighthouse/shop-petitsfruits/frontend/src/screens/ProductScreen.jsx"],"names":["useEffect","useState","useDispatch","useSelector","Link","detailsProduct","LoadingBox","MessageBox","ProductScreen","props","dispatch","productId","match","params","id","qty","setQty","productDetails","state","loading","error","product","addToCartHandler","history","push","image","name","price","description","countInStock","e","target","value","Array","keys","map","x"],"mappings":"sSAAA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,cAAT,KAA+B,2BAA/B,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,CACA,MAAOC,CAAAA,UAAP,KAAuB,0BAAvB,C,6IAEA,cAAe,SAASC,CAAAA,aAAT,CAAuBC,KAAvB,CAA8B,CAC3C,GAAMC,CAAAA,QAAQ,CAAGR,WAAW,EAA5B,CACA,GAAMS,CAAAA,SAAS,CAAGF,KAAK,CAACG,KAAN,CAAYC,MAAZ,CAAmBC,EAArC,CAF2C,cAGrBb,QAAQ,CAAC,CAAD,CAHa,wCAGpCc,GAHoC,eAG/BC,MAH+B,eAI3C,GAAMC,CAAAA,cAAc,CAAGd,WAAW,CAAC,SAACe,KAAD,QAAWA,CAAAA,KAAK,CAACD,cAAjB,EAAD,CAAlC,CAJ2C,GAKnCE,CAAAA,OALmC,CAKPF,cALO,CAKnCE,OALmC,CAK1BC,KAL0B,CAKPH,cALO,CAK1BG,KAL0B,CAKnBC,OALmB,CAKPJ,cALO,CAKnBI,OALmB,CAO3CrB,SAAS,CAAC,UAAM,CACdU,QAAQ,CAACL,cAAc,CAACM,SAAD,CAAf,CAAR,CACD,CAFQ,CAEN,CAACD,QAAD,CAAWC,SAAX,CAFM,CAAT,CAIA,GAAMW,CAAAA,gBAAgB,CAAG,QAAnBA,CAAAA,gBAAmB,EAAM,CAC7Bb,KAAK,CAACc,OAAN,CAAcC,IAAd,iBAA4Bb,SAA5B,iBAA6CI,GAA7C,GACD,CAFD,CAIA,mBACE,qBACGI,OAAO,cACN,KAAC,UAAD,IADM,CAEJC,KAAK,cACP,KAAC,UAAD,EAAY,OAAO,CAAC,QAApB,UAA8BA,KAA9B,EADO,cAGP,oCACE,iCAAI,KAAC,IAAD,EAAM,EAAE,CAAC,OAAT,qCAAJ,EADF,cAEE,aAAK,SAAS,CAAC,SAAf,wBACE,YAAK,SAAS,CAAC,OAAf,uBACE,YACE,SAAS,CAAC,OADZ,CAEE,GAAG,CAAEC,OAAO,CAACI,KAFf,CAGE,GAAG,CAAEJ,OAAO,CAACK,IAHf,EADF,EADF,cAQE,YAAK,SAAS,CAAC,OAAf,uBACE,mCACE,iCACE,oBAAKL,OAAO,CAACK,IAAb,EADF,EADF,cAIE,kCAAcL,OAAO,CAACM,KAAtB,GAJF,cAKE,kDAEE,mBAAIN,OAAO,CAACO,WAAZ,EAFF,GALF,GADF,EARF,cAoBE,YAAK,SAAS,CAAC,OAAf,uBACE,YAAK,SAAS,CAAC,gBAAf,uBACE,mCACE,iCACE,aAAK,SAAS,CAAC,KAAf,wBACE,8BADF,cAEE,aAAK,SAAS,CAAC,OAAf,eAAyBP,OAAO,CAACM,KAAjC,GAFF,GADF,EADF,cAOE,iCACE,aAAK,SAAS,CAAC,KAAf,wBACE,+BADF,cAEE,qBACGN,OAAO,CAACQ,YAAR,CAAuB,CAAvB,cACC,aAAM,SAAS,CAAC,SAAhB,sBADD,cAGC,aAAM,SAAS,CAAC,QAAhB,yBAJJ,EAFF,GADF,EAPF,CAmBGR,OAAO,CAACQ,YAAR,CAAuB,CAAvB,eACC,wCACE,YAAI,SAAS,CAAC,KAAd,wBACE,iCADF,cAEE,kCACE,eACE,KAAK,CAAEd,GADT,CAEE,QAAQ,CAAE,kBAACe,CAAD,QAAOd,CAAAA,MAAM,CAACc,CAAC,CAACC,MAAF,CAASC,KAAV,CAAb,EAFZ,UAIG,mBAAIC,KAAK,CAACZ,OAAO,CAACQ,YAAT,CAAL,CAA4BK,IAA5B,EAAJ,EAAwCC,GAAxC,CACC,SAACC,CAAD,qBACE,eAAoB,KAAK,CAAEA,CAAC,CAAG,CAA/B,UACGA,CAAC,CAAG,CADP,EAAaA,CAAC,CAAG,CAAjB,CADF,EADD,CAJH,EADF,EAFF,GADF,cAkBE,iCACE,eACE,OAAO,CAAEd,gBADX,CAEE,SAAS,CAAC,eAFZ,yBADF,EAlBF,GApBJ,GADF,EADF,EApBF,GAFF,GANJ,EADF,CAuFD","sourcesContent":["import { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport { detailsProduct } from \"../actions/productActions\";\nimport LoadingBox from \"../components/LoadingBox\";\nimport MessageBox from \"../components/MessageBox\";\n\nexport default function ProductScreen(props) {\n  const dispatch = useDispatch();\n  const productId = props.match.params.id;\n  const [qty, setQty] = useState(1);\n  const productDetails = useSelector((state) => state.productDetails);\n  const { loading, error, product } = productDetails;\n\n  useEffect(() => {\n    dispatch(detailsProduct(productId));\n  }, [dispatch, productId]);\n\n  const addToCartHandler = () => {\n    props.history.push(`/cart/${productId}?qty=${qty}`);\n  };\n\n  return (\n    <div>\n      {loading ? (\n        <LoadingBox></LoadingBox>\n      ) : error ? (\n        <MessageBox variant=\"danger\">{error}</MessageBox>\n      ) : (\n        <div>\n          <h2><Link to=\"/shop\" >Retour à la Boutique</Link></h2>\n          <div className=\"row top\">\n            <div className=\"col-2\">\n              <img\n                className=\"large\"\n                src={product.image}\n                alt={product.name}\n              ></img>\n            </div>\n            <div className=\"col-1\">\n              <ul>\n                <li>\n                  <h1>{product.name}</h1>\n                </li>\n                <li>Price : ${product.price}</li>\n                <li>\n                  Description:\n                  <p>{product.description}</p>\n                </li>\n              </ul>\n            </div>\n            <div className=\"col-1\">\n              <div className=\"card card-body\">\n                <ul>\n                  <li>\n                    <div className=\"row\">\n                      <div>Price</div>\n                      <div className=\"price\">${product.price}</div>\n                    </div>\n                  </li>\n                  <li>\n                    <div className=\"row\">\n                      <div>Status</div>\n                      <div>\n                        {product.countInStock > 0 ? (\n                          <span className=\"success\">In Stock</span>\n                        ) : (\n                          <span className=\"danger\">Unavailable</span>\n                        )}\n                      </div>\n                    </div>\n                  </li>\n                  {product.countInStock > 0 && (\n                    <>\n                      <li className=\"row\">\n                        <div>Qté :</div>\n                        <div>\n                          <select\n                            value={qty}\n                            onChange={(e) => setQty(e.target.value)}\n                          >\n                            {[...Array(product.countInStock).keys()].map(\n                              (x) => (\n                                <option key={x + 1} value={x + 1}>\n                                  {x + 1}\n                                </option>\n                              )\n                            )}\n                          </select>\n                        </div>\n                      </li>\n                      <li>\n                        <button\n                          onClick={addToCartHandler}\n                          className=\"primary block\"\n                        >\n                          Add to Cart\n                        </button>\n                      </li>\n                    </>\n                  )}\n                </ul>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}